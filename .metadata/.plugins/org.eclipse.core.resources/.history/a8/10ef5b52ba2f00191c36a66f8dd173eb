package application;

import application.model.StartModel;
import javafx.beans.property.BooleanProperty;
import javafx.beans.property.SimpleBooleanProperty;
import javafx.scene.layout.GridPane;

public class Blackjack {
	private int players = 2;
	private int dealTo = 1;
	private StartModel startMod;
	private GridPane hideCard;
	private int number;
	private int house;
	private BooleanProperty bettingOn = new SimpleBooleanProperty(false);
	
	public void deal() {
		if(hideCard != null) {
			hideCard.getChildren().get(0).getStyleClass().remove("hide");
			hideCard.getChildren().get(1).getStyleClass().remove("hide");
			hideCard.getChildren().get(2).getStyleClass().remove("hide");
		}
		
		house = 0;
		number = 0;
		startMod.clearCards();
		dealerHand.getChildren().clear();
		playerHand.getChildren().clear();
		dealerNumb.setText("Dealer");
		playerNumb.setText("Player");
		dealerNumb.getStyleClass().remove("bust");
		playerNumb.getStyleClass().remove("bust");
		betButton.setDisable(true);
		
		money.setText(Integer.toString(startMod.getMoney()));
		
		hideCard = null;
		for(int i=0; i<players*2; i++) {
			if(dealTo < players) {
				//Deal to player
				playerHand.getChildren().add(startMod.getCard());
				dealTo++;
			}
			else {
				//Deal to dealer
				if(hideCard == null) {
					hideCard = startMod.getCard();
					hideCard.getChildren().get(0).getStyleClass().add("hide");
					hideCard.getChildren().get(1).getStyleClass().add("hide");
					hideCard.getChildren().get(2).getStyleClass().add("hide");
					dealerHand.getChildren().add(hideCard);
					dealTo = 1;
				}
				else {
					dealerHand.getChildren().add(startMod.getCard());
					dealTo = 1;
				}
			}
		}
		
		playerNumb.setText("0");
		int numb = 0;
		for(int i=0; i<2; i++) {
			GridPane card = (GridPane)playerHand.getChildren().get(i);
			numb += getNumber(card);
			playerNumb.setText(Integer.toString(numb));
		}
		
		hit.setDisable(false);
		hold.setDisable(false);
		
		if(number == 21) {
			reset();
		}
	}
}
